const overlays=document.querySelectorAll(".project-overlay");document.addEventListener("DOMContentLoaded",function(){let e=document.querySelector(".progetti-search-input"),t="";if(e){e.addEventListener("input",function(){t=this.value.trim().toLowerCase(),d(l=0),g(l)});let i=document.querySelector(".progetti-search-reset");i&&i.addEventListener("click",function(){e.value="",t="",d(l=0),g(l),e.focus()})}let r=[{title_it:"Set da Caff\xe8",title_en:"Coffee Set",img:"immagini/webp/progetti/product design/set da caff\xe8/all%2022.webp",alt:"Set da Caff\xe8",category:"product"},{title_it:"La cardanica",title_en:"La Cardanica",img:"immagini/webp/progetti/product design/la cardanica/cardanica.webp",alt:"La Cardanica",category:"product"},{title_it:"lounge milani",title_en:"Lounge Milani",img:"immagini/webp/progetti/product design/lounge milani/untitled555.webp",alt:"Lounge Milani",category:"product"},{title_it:"Prototipo Mouse",title_en:"Mouse Prototype",img:"immagini/webp/progetti/prototipazione/mouse/untitled44.webp",alt:"Prototipo Mouse",category:"prototype"},{title_it:"Rendering Interno",title_en:"Interior Rendering",img:"immagini/webp/progetti/rendering/rendering interno/Render%20Interno%20Esame%202.webp",alt:"Rendering Interno",category:"rendering"},{title_it:"Progetto Personale",title_en:"Personal Project",img:"immagini/webp/progetti/rendering/rendering personale/Render_progetto_esame_3.webp",alt:"Progetto Personale",category:"rendering"},{title_it:"Rendering Prodotto",title_en:"Product Rendering",img:"immagini/webp/progetti/rendering/rendering prodotto/Render%20Vespa%20esame.webp",alt:"Rendering Prodotto",category:"rendering"},{title_it:"Modellazione 3D - Biblioteca",title_en:"3D Library Modeling",img:"immagini/webp/progetti/modellazione%203D/biblioteca/render%208.webp",alt:"Modellazione 3D - Biblioteca",category:"3d"}],a=document.getElementById("progettiGrid"),n=document.getElementById("progettiIndicators"),o=document.getElementById("progettiFilters"),l=0,c="all";function s(){let e="all"===c?r:r.filter(e=>e.category===c);return t&&(e=e.filter(e=>e.title_it&&e.title_it.toLowerCase().includes(t)||e.title_en&&e.title_en.toLowerCase().includes(t))),e}function d(e){a.innerHTML="";let t=s(),i=2*e,n=Math.min(i+2,t.length);for(let o=i;o<n;o++){let l=t[o],c=r.indexOf(l),d=document.createElement("div");d.className="progetto-card",d.setAttribute("data-overlay",`project${c+1}`),d.innerHTML=`
        <div class="progetto-image-container">
          <div class="progetto-frame">
            <div class="progetto-image-mask">
              <img src="${l.img}" loading="lazy" alt="${l.alt}" class="progetto-image shadow-effect">
              <div class="progetto-image-overlay"></div>
            </div>
          </div>
          <div class="dynamic-shadow"></div>
        </div>
        <div class="progetto-name-box">
          <h3>
            <span class="lang-it">${l.title_it}</span>
            <span class="lang-en">${l.title_en}</span>
          </h3>
        </div>
      `,d.addEventListener("click",function(){let e=this.getAttribute("data-overlay"),t=document.getElementById(e);t&&(document.querySelectorAll(".project-overlay").forEach(e=>e.classList.remove("active")),t.classList.add("active"),document.body.classList.add("no-scroll"))}),a.appendChild(d)}setTimeout(()=>{document.querySelectorAll(".progetto-image.shadow-effect").forEach(e=>{e.addEventListener("mousemove",function(e){let t=this.getBoundingClientRect(),i=e.clientX-t.left,r=e.clientY-t.top,a=t.width/2,n=t.height/2;this.style.boxShadow=`${(i-a)/25}px ${(r-n)/25}px 20px rgba(0, 0, 0, 0.18)`}),e.addEventListener("mouseleave",function(){this.style.boxShadow=""})})},10)}function g(e){n.innerHTML="";let t=s(),i=Math.ceil(t.length/2);for(let r=0;r<i;r++){let a=document.createElement("button");a.className="indicator"+(r===e?" active":""),a.setAttribute("aria-label",`Vai alla pagina ${r+1}`),a.addEventListener("click",()=>{d(l=r),g(l)}),n.appendChild(a)}}function p(){let e=document.getElementById("filterIndicator"),t=o.querySelector(".filter-btn.active");if(e&&t){let i=t.offsetLeft,r=t.offsetWidth;e.style.transition="none",e.style.transform="scaleX(0.7)",e.style.opacity="0.7",setTimeout(()=>{e.style.transition="left 0.45s cubic-bezier(0.34,1.56,0.64,1), width 0.45s cubic-bezier(0.34,1.56,0.64,1), transform 0.45s cubic-bezier(0.34,1.56,0.64,1), opacity 0.3s cubic-bezier(0.34,1.56,0.64,1)",e.style.left=i+"px",e.style.width=r+"px",e.style.transform="scaleX(1)",e.style.opacity="1"},20)}}function u(e){e.classList.remove("active"),setTimeout(()=>{document.querySelector(".project-overlay.active")||document.body.classList.remove("no-scroll")},200)}function f(e){if(!e)return;let t=e.getAttribute("data-project"),i=e.querySelectorAll(".overlay-carousel-slide"),r=document.querySelectorAll(`.overlay-thumb[data-carousel="${t}"]`),a=0;function n(t){e.style.transform=`translateX(-${100*t}%)`,i.forEach((e,i)=>{e.classList.toggle("active",i===t)}),r.forEach((e,i)=>{e.classList.toggle("active",i===t)}),a=t}return r.forEach((e,t)=>{e.addEventListener("click",function(){n(t)})}),n(0),{next:()=>n((a+1)%i.length),prev:()=>n((a-1+i.length)%i.length),goTo:e=>n(e)}}function y(e){if(!e)return;let t=f(e);return e.autoInterval&&clearInterval(e.autoInterval),e.autoInterval=setInterval(()=>{t.next()},4e3),e.autoInterval}function m(){document.querySelectorAll(".shadow-effect").forEach(e=>{e.addEventListener("mousemove",function(e){let t=this.getBoundingClientRect(),i=e.clientX-t.left,r=e.clientY-t.top,a=t.width/2,n=t.height/2;this.style.boxShadow=`${(i-a)/25}px ${(r-n)/25}px 20px rgba(0, 0, 0, 0.2)`}),e.addEventListener("mouseleave",function(){this.style.boxShadow=""})})}o&&(setTimeout(p,100),window.addEventListener("resize",p),o.addEventListener("click",function(e){if(e.target.classList.contains("filter-btn")){let t=document.getElementById("progettiGrid");t.style.transition="opacity 0.5s cubic-bezier(0.25, 1, 0.5, 1), transform 0.6s cubic-bezier(0.25, 1, 0.5, 1)",t.style.opacity="0",t.style.transform="translateY(30px) scale(0.98)",setTimeout(()=>{document.querySelectorAll(".filter-btn").forEach(e=>e.classList.remove("active")),e.target.classList.add("active"),c=e.target.getAttribute("data-category"),d(l=0),g(l),t.style.opacity="1",t.style.transform="translateY(0) scale(1)",p()},250)}})),d(l),g(l),overlays.forEach(e=>{e.addEventListener("click",function(t){t.target===e&&u(e)});let t=e.querySelector(".overlay-close");t&&t.addEventListener("click",function(t){t.stopPropagation(),u(e)})}),document.addEventListener("keydown",function(e){"Escape"===e.key&&(document.querySelectorAll(".project-overlay").forEach(e=>e.classList.remove("active")),document.body.classList.remove("no-scroll"))}),document.querySelectorAll(".overlay-carousel-track").forEach(e=>{f(e)}),m(),overlays.forEach(e=>{e.addEventListener("transitionend",function(e){"opacity"===e.propertyName&&this.classList.contains("active")&&m()})}),setTimeout(()=>{d(0)},500)});