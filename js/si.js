document.addEventListener("DOMContentLoaded",function(){let e=document.querySelector(".progetti-burger-btn"),t=document.getElementById("progettiBurgerDropdown"),i=document.querySelectorAll(".progetti-menu-link");e&&t&&(e.addEventListener("click",function(i){i.stopPropagation();let n="true"===e.getAttribute("aria-expanded");n?(t.classList.remove("active"),e.setAttribute("aria-expanded","false"),t.setAttribute("aria-hidden","true")):(t.classList.add("active"),e.setAttribute("aria-expanded","true"),t.setAttribute("aria-hidden","false"))}),document.addEventListener("click",function(i){t.contains(i.target)||e.contains(i.target)||(t.classList.remove("active"),e.setAttribute("aria-expanded","false"),t.setAttribute("aria-hidden","true"))}),i.forEach(function(i){i.addEventListener("click",function(){t.classList.remove("active"),e.setAttribute("aria-expanded","false"),t.setAttribute("aria-hidden","true");let n=i.getAttribute("data-category"),r=document.querySelector('.progetti-filters .filter-btn[data-category="'+n+'"]');r&&r.click()})}))});const contattamiBtn=document.querySelector('.btn.btn-outline[href="#contatti"]');function loadRandomProjectImages(){let e=document.getElementById("heroGrid");if(!e){console.error("Elemento heroGrid non trovato nel DOM");return}console.log("Inizializzazione caricamento immagini con scorrimento orizzontale...");let t=calculateNumberOfRows();e.innerHTML="";let i=0,n=0;function r(){++i===n&&e.classList.add("images-loaded")}let a=shuffleArray(["immagini/webp/progetti/product%20design/set%20da%20caff%C3%A8/all%2022.webp","immagini/webp/progetti/product%20design/set%20da%20caff%C3%A8/tazzina_.webp","immagini/webp/progetti/product%20design/set%20da%20caff%C3%A8/zuccheriera%202_.webp","immagini/webp/progetti/product%20design/la%20cardanica/cardanica%20600.webp","immagini/webp/progetti/product%20design/la%20cardanica/cardanica%20900.webp","immagini/webp/progetti/product%20design/la%20cardanica/cardanica.webp","immagini/webp/progetti/product%20design/lounge%20milani/untitled202.webp","immagini/webp/progetti/product%20design/lounge%20milani/untitled555.webp","immagini/webp/progetti/product%20design/lounge%20milani/untitled702.webp","immagini/webp/progetti/prototipazione/mouse/untitled.webp","immagini/webp/progetti/prototipazione/mouse/untitled33.webp","immagini/webp/progetti/prototipazione/mouse/untitled44.webp","immagini/webp/progetti/modellazione%203D/biblioteca/3.webp","immagini/webp/progetti/modellazione%203D/biblioteca/4.webp","immagini/webp/progetti/modellazione%203D/biblioteca/6.webp","immagini/webp/progetti/modellazione%203D/biblioteca/7.webp","immagini/webp/progetti/modellazione%203D/biblioteca/render%208.webp","immagini/webp/progetti/rendering/rendering%20interno/Render%20Interno%20Esame%202.webp","immagini/webp/progetti/rendering/rendering%20interno/Untitled.webp","immagini/webp/progetti/rendering/rendering%20interno/Untitled2.webp","immagini/webp/progetti/rendering/rendering%20interno/Untitled3.webp","immagini/webp/progetti/rendering/rendering%20interno/Untitled4.webp","immagini/webp/progetti/rendering/rendering%20personale/Render_progetto_esame_3.webp","immagini/webp/progetti/rendering/rendering%20personale/Screenshot%202025-07-11%20171951.webp","immagini/webp/progetti/rendering/rendering%20personale/Screenshot%202025-07-11%20171953.webp","immagini/webp/progetti/rendering/rendering%20personale/Screenshot%202025-07-11%20171955.webp","immagini/webp/progetti/rendering/rendering%20personale/Screenshot%202025-07-11%20171957.webp","immagini/webp/progetti/rendering/rendering%20prodotto/Render%20Vespa%20esame.webp","immagini/webp/progetti/rendering/rendering%20prodotto/Untitled.webp","immagini/webp/progetti/rendering/rendering%20prodotto/Untitled2.webp","immagini/webp/progetti/rendering/rendering%20prodotto/Untitled3.webp","immagini/webp/progetti/rendering/rendering%20prodotto/Untitled4.webp"]),o=[];for(let l=0;l<t;l++){let d=document.createElement("div");d.className=`hero-grid-row ${l%2==0?"even":"odd"}`,d.style.animation=`${l%2==0?"slideInFromLeft":"slideInFromRight"} 0.8s ease-out forwards, ${l%2==0?"slideLeftToRight":"slideRightToLeft"} ${25+l%3*5}s linear ${.8+.1*l}s infinite`,d.style.animationDelay=`${.15*l}s`,d.style.margin="0",d.style.padding="0";let s=window.innerWidth,c=s<=480?100:s<=767?120:s<=1199?150:180,p=Math.ceil(2*s/c)+4;o[l]||(o[l]=[]);for(let g=0;g<p;g++){function m(){let e=[...a],i=new Set,n=o[l]||[];for(let r=1;r<=11&&g-r>=0;r++)n[g-r]&&i.add(n[g-r]);for(let d=-2;d<=2;d++){let s=l+d;if(s>=0&&s<t&&s!==l&&o[s])for(let c=-2;c<=2;c++){let p=g+c;p>=0&&o[s][p]&&i.add(o[s][p])}}i.size>0&&(e=e.filter(e=>!i.has(e))),0===e.length&&(e=[...a]);let m=Math.floor(Math.random()*e.length);return e[m]}let $=m();o[l][g]=$;let b=document.createElement("div");b.className="hero-grid-item";let u=document.createElement("img");u.src=$,u.loading=n<20?"eager":"lazy",u.alt="",u.dataset.imageId=$.split("/").pop(),n++,u.onload=function(){r()},u.onerror=function(){console.error("Errore nel caricamento dell'immagine:",$);let e=$.replace(/%20/g," ");e!==$?u.src=e:(b.classList.add("image-error"),r())},b.appendChild(u),d.appendChild(b)}e.appendChild(d)}}function calculateNumberOfRows(){let e=window.innerWidth;return e>=1200?8:e>=768?6:e>=481?5:8}function debounce(e,t){let i;return function(...n){let r=()=>{clearTimeout(i),e.apply(this,n)};clearTimeout(i),i=setTimeout(r,t)}}function shuffleArray(e){for(let t=e.length-1;t>0;t--){let i=Math.floor(Math.random()*(t+1));[e[t],e[i]]=[e[i],e[t]]}return e}function handleFadeInUpOnScroll(){let e=document.querySelectorAll(".fade-in-up");e.forEach(e=>{let t=e.getBoundingClientRect();t.top<.85*window.innerHeight&&e.classList.add("visible")})}contattamiBtn&&contattamiBtn.addEventListener("click",function(e){e.preventDefault();let t=document.getElementById("contatti");t&&t.scrollIntoView({behavior:"smooth"})}),document.addEventListener("DOMContentLoaded",function(){document.documentElement.classList.add("theme-loaded"),setTimeout(function(){loadRandomProjectImages()},100);let e=document.getElementById("scrollIndicator"),t=document.querySelector("#main-content"),i=document.querySelector(".navbar-container");e&&e.addEventListener("click",function(){t.scrollIntoView({behavior:"smooth"})}),window.addEventListener("scroll",function(){(window.pageYOffset||document.documentElement.scrollTop)>.7*window.innerHeight?i.classList.add("visible"):i.classList.remove("visible")});let n=document.querySelectorAll(".typing-animation[data-text]");n.forEach((e,t)=>{let i=e.getAttribute("data-text")||"";e.innerHTML="";let n=document.createElement("span");n.className="typing-text",e.appendChild(n),setTimeout(()=>{let e=0;!function t(){e<i.length&&(n.textContent+=i.charAt(e),e++,setTimeout(t,100))}()},1e3+400*t)});let r=document.querySelector(".burger-menu"),a=document.querySelector(".navbar");r&&a&&(r.addEventListener("click",function(e){e.stopPropagation();let t="true"===this.getAttribute("aria-expanded");this.setAttribute("aria-expanded",!t),a.style.display=t?"none":"block"}),document.addEventListener("click",function(e){let t=window.matchMedia("(max-width: 768px)").matches,i="true"===r.getAttribute("aria-expanded");t&&i&&"block"===a.style.display&&!a.contains(e.target)&&!r.contains(e.target)&&(a.style.display="none",r.setAttribute("aria-expanded","false"))})),!function e(){let t=document.getElementById("scrollIndicator"),i=document.getElementById("chi-sono"),n=!1;t&&i&&t.addEventListener("click",function(e){e.preventDefault(),n||(n=!0,i.scrollIntoView({behavior:"smooth"}),setTimeout(()=>{n=!1},1e3))}),document.addEventListener("wheel",function(e){document.querySelector(".hero");let t=window.innerHeight;window.scrollY<.3*t&&!n&&e.deltaY>0&&i&&(e.preventDefault(),n=!0,i.scrollIntoView({behavior:"smooth"}),setTimeout(()=>{n=!1},1e3))},{passive:!1})}();let o=document.getElementById("btn-percorso-scolastico"),l=document.getElementById("school-path-dropdown");o&&l&&(l.style.display="none",l.classList.remove("visible"),o.addEventListener("click",function(e){e.preventDefault(),"none"===l.style.display||""===l.style.display?(l.style.display="block",l.offsetWidth,l.classList.add("visible"),setTimeout(()=>{let e=l.getBoundingClientRect();(e.top<0||e.bottom>window.innerHeight)&&l.scrollIntoView({behavior:"smooth",block:"center"})},100)):(l.classList.remove("visible"),setTimeout(()=>{l.style.display="none"},300))}));let d=document.querySelectorAll(".school-filters-tabs .skill-filter-btn"),s=document.querySelectorAll(".school-content-wrapper");d.length>0&&d.forEach(e=>{e.addEventListener("click",function(){d.forEach(e=>e.classList.remove("active")),this.classList.add("active");let e=this.getAttribute("data-filter");s.forEach(e=>{e.style.display="none"}),document.getElementById(`${e}-content`).style.display="block"})})}),window.addEventListener("resize",debounce(function(){loadRandomProjectImages()},350)),window.addEventListener("scroll",handleFadeInUpOnScroll),window.addEventListener("DOMContentLoaded",handleFadeInUpOnScroll);