document.addEventListener("DOMContentLoaded",function(){!function e(){let t=document.querySelectorAll('a[data-modal="privacy-modal"]'),n=document.getElementById("privacy-modal");if(t.length>0&&n){t.forEach(function(e){e.addEventListener("click",function(e){e.preventDefault(),n.classList.add("active"),document.body.style.overflow="hidden",document.documentElement.style.overflow="hidden",n.setAttribute("aria-hidden","false"),n.focus(),document.querySelectorAll("body > *:not(#privacy-modal)").forEach(e=>{e!==n&&(e.setAttribute("aria-hidden","true"),e.classList.contains("navbar-container")&&(e.style.display="none"))})})});let o=n.querySelector(".fullscreen-modal-close");o&&o.addEventListener("click",function(){s()});let r=n.querySelector(".fullscreen-modal-overlay");function s(){n.classList.remove("active"),document.body.style.overflow="",document.documentElement.style.overflow="",n.setAttribute("aria-hidden","true"),document.querySelectorAll("body > *:not(#privacy-modal)").forEach(e=>{e.removeAttribute("aria-hidden"),e.classList.contains("navbar-container")&&(e.style.display="")})}r&&r.addEventListener("click",function(){s()}),document.addEventListener("keydown",function(e){"Escape"===e.key&&n.classList.contains("active")&&s()})}}();let e=document.getElementById("contact-form"),t=document.querySelectorAll(".form-group input, .form-group textarea");t.forEach(e=>{e.addEventListener("focus",function(){this.parentElement.classList.add("focused")}),e.addEventListener("blur",function(){""===this.value.trim()&&this.parentElement.classList.remove("focused"),o(this)})}),e&&e.addEventListener("submit",function(n){n.preventDefault();let r=!0;t.forEach(e=>{o(e)||(r=!1)});let s=document.getElementById("privacy-consent");if(s&&!s.checked){let i=s.closest(".form-checkbox");i.classList.add("error"),r=!1}if(r){let a=e.querySelector(".submit-button"),l=a.innerHTML;a.disabled=!0,a.innerHTML='<span class="loading-spinner"></span> Invio in corso...',setTimeout(()=>{let t=e.querySelector(".form-message");t&&t.remove();let n=document.createElement("div");n.className="form-message success",n.innerHTML="Grazie! Il tuo messaggio \xe8 stato inviato con successo.",e.insertBefore(n,e.firstChild),a.disabled=!1,a.innerHTML=l,e.reset(),setTimeout(()=>{n.style.opacity="0",setTimeout(()=>{n.remove()},300)},6e3)},1500)}});let n=document.querySelectorAll('.form-checkbox input[type="checkbox"]');function o(e){let t=e.closest(".form-group"),n=!0,o=t.querySelector(".error-message");return o&&o.remove(),e.required&&""===e.value.trim()?(r(t,"Questo campo \xe8 obbligatorio"),n=!1):"email"!==e.type||""===e.value.trim()||/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(e.value)||(r(t,"Inserisci un indirizzo email valido"),n=!1),t.classList.toggle("error",!n),n}function r(e,t){let n=document.createElement("div");n.className="error-message",n.textContent=t,e.appendChild(n)}n.forEach(e=>{e.addEventListener("change",function(){let e=this.closest(".form-checkbox");this.checked&&e.classList.remove("error")})});let s=document.querySelector(".contact-form-container");!s||"ontouchstart"in window||(s.addEventListener("mousemove",function(e){let t=this.getBoundingClientRect(),n=(e.clientX-t.left)/t.width-.5,o=(e.clientY-t.top)/t.height-.5;this.style.transform=`
        perspective(1000px) 
        rotateY(${5*n}deg) 
        rotateX(${-(5*o)}deg)
        translateY(-5px)
      `}),s.addEventListener("mouseleave",function(){this.style.transform=""}))});