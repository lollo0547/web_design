function updateActiveSection(){let e=document.querySelectorAll(".navbar a"),t=document.querySelectorAll("section[id]"),n=window.scrollY+100,r=Array.from(t).map(e=>({id:e.getAttribute("id"),top:e.offsetTop,height:e.offsetHeight})),i=!1;r.forEach(({id:t,top:r,height:s})=>{if(!i&&n>=r&&n<r+s){e.forEach(e=>e.classList.remove("active"));let l=document.querySelector(`.navbar a[href*="${t}"]`);l&&l.classList.add("active"),i=!0}})}function initPageLayout(){let e=document.getElementById("chi-sono");e&&window.addEventListener("resize",function(){updateActiveSection()});let t=document.getElementById("scrollIndicator");t&&t.addEventListener("click",function(){e&&e.scrollIntoView({behavior:"smooth"})})}function throttle(e,t){let n=0;return function(...r){let i=new Date().getTime();if(!(i-n<t))return n=i,e(...r)}}document.addEventListener("DOMContentLoaded",function(){let e=document.querySelectorAll(".reveal, .reveal-left, .reveal-right"),t=(e,t)=>{e.forEach(e=>{e.isIntersecting&&(e.target.classList.add("active"),t.unobserve(e.target))})},n=new IntersectionObserver(t,{root:null,rootMargin:"0px",threshold:.1});e.forEach(e=>{n.observe(e)}),setTimeout(function(){e.forEach(e=>{let t=e.getBoundingClientRect();t.top>=0&&t.bottom<=window.innerHeight&&e.classList.add("active")})},300);let r=document.querySelector(".navbar-container"),i=document.querySelectorAll(".navbar a");document.querySelectorAll("section[id]");let s=0;function l(){let e=document.querySelectorAll(".navbar a"),t=document.querySelectorAll("section[id]"),n=window.scrollY+100;t.forEach(t=>{let r=t.offsetTop,i=t.offsetHeight,s=t.getAttribute("id");if(n>=r&&n<r+i){e.forEach(e=>{e.classList.remove("active")});let l=document.querySelector(`.navbar a[href*="${s}"]`);l&&l.classList.add("active")}})}window.addEventListener("scroll",function(){let e=window.pageYOffset||document.documentElement.scrollTop;e>=500?(r.classList.add("visible"),r.style.transform="translateY(0)"):r.classList.remove("visible"),s=e,l()}),i.forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();let t=this.getAttribute("href"),n=document.querySelector(t);n&&(window.scrollTo({top:n.offsetTop-60,behavior:"smooth"}),i.forEach(e=>e.classList.remove("active")),this.classList.add("active"))})}),l()}),document.addEventListener("DOMContentLoaded",function(){let e=document.querySelector(".burger-menu"),t=document.querySelector(".navbar");e&&t&&(e.addEventListener("click",function(){t.classList.toggle("active");let n=t.classList.contains("active");e.setAttribute("aria-expanded",n),e.innerHTML=n?"✕":"☰"}),document.addEventListener("click",function(n){let r=t.contains(n.target),i=e.contains(n.target);!r&&!i&&t.classList.contains("active")&&(t.classList.remove("active"),e.setAttribute("aria-expanded","false"),e.innerHTML="☰")}))}),document.addEventListener("DOMContentLoaded",initPageLayout),document.addEventListener("DOMContentLoaded",function(){let e=document.querySelectorAll(".accordion-header");e.length&&e.forEach(t=>{t.addEventListener("click",function(){let t="true"===this.getAttribute("aria-expanded");this.setAttribute("aria-expanded",!t),e.forEach(e=>{e!==this&&e.setAttribute("aria-expanded","false")})})})}),document.addEventListener("DOMContentLoaded",function(){let e=document.getElementById("contact-form");function t(e,t){let n=document.getElementById(e),r=n.nextElementSibling;r&&r.classList.contains("error-message")||((r=document.createElement("div")).className="error-message",n.parentNode.insertBefore(r,n.nextSibling)),r.textContent=t,n.classList.add("error")}function n(e){let t=document.getElementById(e),n=t.nextElementSibling;n&&n.classList.contains("error-message")&&n.remove(),t.classList.remove("error")}e&&e.addEventListener("submit",function(r){var i;r.preventDefault();let s=document.getElementById("name").value.trim(),l=document.getElementById("email").value.trim(),a=document.getElementById("subject").value.trim(),o=document.getElementById("message").value.trim(),c=!0;s?n("name"):(t("name","Nome richiesto"),c=!1),l?(i=l,/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(i))?n("email"):(t("email","Email non valida"),c=!1):(t("email","Email richiesta"),c=!1),a?n("subject"):(t("subject","Oggetto richiesto"),c=!1),o?n("message"):(t("message","Messaggio richiesto"),c=!1),c&&(e.innerHTML='<div class="form-success"><h3>Messaggio inviato!</h3><p>Grazie per avermi contattato. Ti risponder\xf2 il prima possibile.</p></div>')})}),document.addEventListener("DOMContentLoaded",function(){let e=document.querySelectorAll(".skill-progress");if(e.length){let t=new IntersectionObserver(e=>{e.forEach(e=>{if(e.isIntersecting){let n=e.target,r=n.style.width;n.style.width="0",setTimeout(()=>{n.style.width=r},100),t.unobserve(n)}})},{threshold:.1});e.forEach(e=>{t.observe(e)})}}),document.addEventListener("DOMContentLoaded",function(){let e=document.querySelectorAll(".section"),t=0,n="down",r=0,i=!1,s=[];function l(){s=[],e.forEach(e=>{s.push(e.offsetTop)})}l(),window.addEventListener("resize",l),window.addEventListener("scroll",throttle(function(){var l,a;if(i)return;let o=window.pageYOffset||document.documentElement.scrollTop;n=o>t?"down":"up",t=o;let c=function e(){let t=window.scrollY+window.innerHeight/3,n=0;return s.forEach((e,r)=>{t>=e&&(n=r)}),n}();c!==r&&(l=r,a=c,i=!0,l>=0&&l<e.length&&(e[l].classList.remove("active"),e[l].classList.add("down"===n?"scroll-down-leave":"scroll-up-leave")),a>=0&&a<e.length&&(e[a].classList.remove("scroll-down-enter","scroll-up-enter","scroll-down-leave","scroll-up-leave"),e[a].classList.add("down"===n?"scroll-down-enter":"scroll-up-enter"),e[a].offsetWidth,e[a].classList.add("active"),e[a].classList.remove("scroll-down-enter","scroll-up-enter")),setTimeout(()=>{l>=0&&l<e.length&&e[l].classList.remove("scroll-down-leave","scroll-up-leave"),i=!1},800),r=c)},100)),e.length>0&&e[0].classList.add("active")}),document.addEventListener("DOMContentLoaded",function(){});